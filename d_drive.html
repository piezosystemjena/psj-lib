

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>d-Drive and 30DV50/300 &mdash; psj-lib Python Library</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5349f25f" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="_static/style_override_css/style_override.css?v=6a36a437" />
      <link rel="stylesheet" type="text/css" href="_static/style_override_css/color_roles.css?v=7881a399" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/dark.css?v=70edf1c7" />

  
    <link rel="shortcut icon" href="_static/favicon.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=d45e8c67"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="_static/dark_mode_js/default_light.js?v=c2e647ce"></script>
      <script src="_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Base Capabilities" href="base_capabilities.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            psj-lib Python Library
              <img src="_static/piezosystem_logo_white.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="connecting.html">Connecting to Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Device Documentation:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">d-Drive and 30DV50/300</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hardware-specifications">Hardware Specifications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#digital-control-system">Digital Control System</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#channel-capabilities">Channel Capabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#status-and-monitoring">Status and Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="#position-control">Position Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#control-system">Control System</a></li>
<li class="toctree-l3"><a class="reference internal" href="#signal-generation">Signal Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-acquisition">Data Acquisition</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-capabilities">Accessing Capabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#channel-capabilities-reference">Channel Capabilities Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-drive-status-register">d-Drive Status Register</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-drive-waveform-generator">d-Drive Waveform Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-drive-data-recorder">d-Drive Data Recorder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-drive-closed-loop-controller">d-Drive Closed-Loop Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-drive-setpoint">d-Drive Setpoint</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#multi-channel-coordination">Multi-Channel Coordination</a></li>
<li class="toctree-l2"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="base_capabilities.html">Base Capabilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">psj-lib Python Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">d-Drive and 30DV50/300</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="d-drive-and-30dv50-300">
<h1>d-Drive and 30DV50/300<a class="headerlink" href="#d-drive-and-30dv50-300" title="Link to this heading"></a></h1>
<p>This page covers the d-Drive modular amplifier family, its features, and how to use it with psj-lib.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The <strong>d-Drive</strong> is piezosystem jena’s modular piezo amplifier series, designed for precision nanopositioning
and high-dynamic control applications. Each d-Drive unit can contain 1-6 independent amplifier channels in a
compact enclosure.</p>
<p>The <strong>30DV50/300</strong> is a single-channel amplifier that shares the same command set and
capability model as d-Drive. It is ideal for compact, single-axis setups.</p>
</section>
<section id="hardware-specifications">
<h2>Hardware Specifications<a class="headerlink" href="#hardware-specifications" title="Link to this heading"></a></h2>
<section id="digital-control-system">
<h3>Digital Control System<a class="headerlink" href="#digital-control-system" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Resolution</strong>: 20-bit DAC and ADC (1,048,576 steps)</p></li>
<li><p><strong>Sample Rate</strong>: 50 kHz (20 µs control loop period)</p></li>
<li><p><strong>Control Loop</strong>: Digital PID with feedforward compensation (PCF)</p></li>
</ul>
</section>
</section>
<section id="channel-capabilities">
<h2>Channel Capabilities<a class="headerlink" href="#channel-capabilities" title="Link to this heading"></a></h2>
<p>Each d-Drive channel provides comprehensive control capabilities:</p>
<section id="status-and-monitoring">
<h3>Status and Monitoring<a class="headerlink" href="#status-and-monitoring" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Status Register</strong>: Real-time hardware state flags</p></li>
<li><p><strong>Temperature</strong>: Internal amplifier temperature monitoring</p></li>
<li><p><strong>Actuator Description</strong>: Connected piezo description readout</p></li>
<li><p><strong>Fan Control</strong>: Active cooling fan management</p></li>
</ul>
</section>
<section id="position-control">
<h3>Position Control<a class="headerlink" href="#position-control" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Setpoint</strong>: Voltage and position target setting</p></li>
<li><p><strong>Position</strong>: Actor position readback</p></li>
<li><p><strong>Closed-Loop Controller</strong>: Enable/disable feedback control</p></li>
<li><p><strong>Slew Rate</strong>: Maximum rate of change limiting</p></li>
</ul>
</section>
<section id="control-system">
<h3>Control System<a class="headerlink" href="#control-system" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>PID Controller</strong>: Proportional-Integral-Derivative tuning</p></li>
<li><p><strong>Pre-Control Factor (PCF)</strong>: Feedforward compensation</p></li>
<li><p><strong>Notch Filter</strong>: Resonance suppression</p></li>
<li><p><strong>Low-Pass Filter</strong>: Signal noise reduction</p></li>
<li><p><strong>Error LPF</strong>: PID error signal filtering</p></li>
</ul>
</section>
<section id="signal-generation">
<h3>Signal Generation<a class="headerlink" href="#signal-generation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Waveform Generator</strong>: Function generation (sine, triangle, sweep, etc.)</p></li>
<li><p><strong>Modulation Source</strong>: External or internal signal modulation</p></li>
<li><p><strong>Monitor Output</strong>: Configurable analog output routing</p></li>
</ul>
</section>
<section id="data-acquisition">
<h3>Data Acquisition<a class="headerlink" href="#data-acquisition" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Data Recorder</strong>: Two-channel data capture (500k samples)</p></li>
<li><p><strong>Trigger Out</strong>: Hardware trigger generation (TTL output)</p></li>
</ul>
</section>
</section>
<section id="accessing-capabilities">
<h2>Accessing Capabilities<a class="headerlink" href="#accessing-capabilities" title="Link to this heading"></a></h2>
<p>All capabilities are accessed as channel attributes. The d-Drive provides both standard piezo capabilities
and device-specific implementations.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psj_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">DDriveDevice</span><span class="p">,</span> <span class="n">TransportType</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">DDriveDevice</span><span class="p">(</span><span class="n">TransportType</span><span class="o">.</span><span class="n">SERIAL</span><span class="p">,</span> <span class="s2">&quot;COM3&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">device</span><span class="p">:</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Access any capability as a channel property</span>
    <span class="n">status</span> <span class="o">=</span> <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">status_register</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">position</span> <span class="o">=</span> <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">setpoint</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mf">50.0</span><span class="p">)</span>

<span class="n">Using</span> <span class="n">PSJ</span> <span class="mi">30</span><span class="n">DV</span> <span class="n">series</span>
<span class="o">^^^^^^^^^^^^^^^^^^^^^</span>

<span class="n">The</span> <span class="mi">30</span><span class="n">DV50</span><span class="o">/</span><span class="mi">300</span> <span class="n">exposes</span> <span class="n">a</span> <span class="n">single</span> <span class="n">channel</span> <span class="p">(</span><span class="n">ID</span> <span class="mi">0</span><span class="p">)</span> <span class="k">with</span> <span class="n">the</span> <span class="n">same</span> <span class="n">capabilities</span> <span class="k">as</span> <span class="n">a</span> <span class="n">d</span><span class="o">-</span><span class="n">Drive</span> <span class="n">channel</span><span class="p">:</span>

<span class="o">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">python</span>

  <span class="kn">from</span><span class="w"> </span><span class="nn">psj_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">PSJ30DVDevice</span><span class="p">,</span> <span class="n">TransportType</span>

  <span class="n">device</span> <span class="o">=</span> <span class="n">PSJ30DVDevice</span><span class="p">(</span><span class="n">TransportType</span><span class="o">.</span><span class="n">SERIAL</span><span class="p">,</span> <span class="s2">&quot;COM3&quot;</span><span class="p">)</span>
  <span class="k">async</span> <span class="k">with</span> <span class="n">device</span><span class="p">:</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">closed_loop_controller</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">setpoint</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mf">10.0</span><span class="p">)</span>
</pre></div>
</div>
<section id="channel-capabilities-reference">
<h3>Channel Capabilities Reference<a class="headerlink" href="#channel-capabilities-reference" title="Link to this heading"></a></h3>
<p>All d-Drive channel capabilities with API references:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 35.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>API Reference</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">status_register</span></code></p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">StatusCapability</span></code></p></td>
<td><p>Hardware status with d-Drive specific flags (actuator detection, sensor type, waveform status)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">actuator_description</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.actuator_description.ActuatorDescription" title="psj_lib.devices.base.capabilities.actuator_description.ActuatorDescription"><code class="xref py py-class docutils literal notranslate"><span class="pre">ActuatorDescription</span></code></a></p></td>
<td><p>Actuator identification and specifications</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">setpoint</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.setpoint.Setpoint" title="psj_lib.devices.base.capabilities.setpoint.Setpoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Setpoint</span></code></a></p></td>
<td><p>Target position control (write-only, readback is cached client-side)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">position</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.position.Position" title="psj_lib.devices.base.capabilities.position.Position"><code class="xref py py-class docutils literal notranslate"><span class="pre">Position</span></code></a></p></td>
<td><p>Actual position readback (read-only, updates every 500ms)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">temperature</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.temperature.Temperature" title="psj_lib.devices.base.capabilities.temperature.Temperature"><code class="xref py py-class docutils literal notranslate"><span class="pre">Temperature</span></code></a></p></td>
<td><p>Amplifier electronics temperature monitoring</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fan</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.fan.Fan" title="psj_lib.devices.base.capabilities.fan.Fan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fan</span></code></a></p></td>
<td><p>Cooling fan enable/disable control (Presence of fan is hardware dependent)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">closed_loop_controller</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.closed_loop_controller.ClosedLoopController" title="psj_lib.devices.base.capabilities.closed_loop_controller.ClosedLoopController"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClosedLoopController</span></code></a></p></td>
<td><p>Feedback control enable/disable</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">slew_rate</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.slew_rate.SlewRate" title="psj_lib.devices.base.capabilities.slew_rate.SlewRate"><code class="xref py py-class docutils literal notranslate"><span class="pre">SlewRate</span></code></a></p></td>
<td><p>Maximum rate of change limiting</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pcf</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.pcf.PreControlFactor" title="psj_lib.devices.base.capabilities.pcf.PreControlFactor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PreControlFactor</span></code></a></p></td>
<td><p>Pre-control factor (feedforward compensation)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pid_controller</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.pid_controller.PIDController" title="psj_lib.devices.base.capabilities.pid_controller.PIDController"><code class="xref py py-class docutils literal notranslate"><span class="pre">PIDController</span></code></a></p></td>
<td><p>PID controller configuration (P, I, D, diff filter)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">notch</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.notch_filter.NotchFilter" title="psj_lib.devices.base.capabilities.notch_filter.NotchFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotchFilter</span></code></a></p></td>
<td><p>Notch filter for resonance suppression</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lpf</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.low_pass_filter.LowPassFilter" title="psj_lib.devices.base.capabilities.low_pass_filter.LowPassFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">LowPassFilter</span></code></a></p></td>
<td><p>Low-pass filter for signal conditioning</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">error_lpf</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.error_low_pass_filter.ErrorLowPassFilter" title="psj_lib.devices.base.capabilities.error_low_pass_filter.ErrorLowPassFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ErrorLowPassFilter</span></code></a></p></td>
<td><p>Error signal low-pass filter</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">modulation_source</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.modulation_source.ModulationSource" title="psj_lib.devices.base.capabilities.modulation_source.ModulationSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModulationSource</span></code></a></p></td>
<td><p>Modulation input source selection (expects <a class="reference internal" href="api.html#psj_lib.devices.d_drive_family.capabilities.d_drive_modulation_source.DDriveModulationSourceTypes" title="psj_lib.devices.d_drive_family.capabilities.d_drive_modulation_source.DDriveModulationSourceTypes"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveModulationSourceTypes</span></code></a> enum)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">monitor_output</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.monitor_output.MonitorOutput" title="psj_lib.devices.base.capabilities.monitor_output.MonitorOutput"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonitorOutput</span></code></a></p></td>
<td><p>Analog monitor output routing (expects <a class="reference internal" href="api.html#psj_lib.devices.d_drive_family.capabilities.d_drive_monitor_output.DDriveMonitorOutputSource" title="psj_lib.devices.d_drive_family.capabilities.d_drive_monitor_output.DDriveMonitorOutputSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveMonitorOutputSource</span></code></a> enum)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">waveform_generator</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.d_drive_family.capabilities.d_drive_waveform_generator.DDriveWaveformGenerator" title="psj_lib.devices.d_drive_family.capabilities.d_drive_waveform_generator.DDriveWaveformGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveWaveformGenerator</span></code></a></p></td>
<td><p>Multi-waveform generator with 5 types (sine, triangle, rectangle, noise, sweep) and automated scan function</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">data_recorder</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.data_recorder.DataRecorder" title="psj_lib.devices.base.capabilities.data_recorder.DataRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataRecorder</span></code></a></p></td>
<td><p>Two-channel recorder: position + voltage, 500k samples max, 50 kHz sample rate</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">trigger_out</span></code></p></td>
<td><p><a class="reference internal" href="api.html#psj_lib.devices.d_drive_family.capabilities.d_drive_trigger_out.DDriveTriggerOut" title="psj_lib.devices.d_drive_family.capabilities.d_drive_trigger_out.DDriveTriggerOut"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveTriggerOut</span></code></a></p></td>
<td><p>Hardware trigger output with d-Drive specific offset parameter</p></td>
</tr>
</tbody>
</table>
</section>
<section id="d-drive-status-register">
<h3>d-Drive Status Register<a class="headerlink" href="#d-drive-status-register" title="Link to this heading"></a></h3>
<p>The <a class="reference internal" href="api.html#psj_lib.devices.d_drive_family.capabilities.d_drive_status_register.DDriveStatusRegister" title="psj_lib.devices.d_drive_family.capabilities.d_drive_status_register.DDriveStatusRegister"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveStatusRegister</span></code></a> provides d-Drive specific hardware state information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psj_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">DDriveDevice</span><span class="p">,</span> <span class="n">TransportType</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">DDriveDevice</span><span class="p">(</span><span class="n">TransportType</span><span class="o">.</span><span class="n">SERIAL</span><span class="p">,</span> <span class="s2">&quot;COM3&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">device</span><span class="p">:</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">status</span> <span class="o">=</span> <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">status_register</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

    <span class="c1"># d-Drive specific status flags</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Actuator plugged: </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">actor_plugged</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sensor type: </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">sensor_type</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Voltage enabled: </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">piezo_voltage_enabled</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Closed-loop: </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">closed_loop</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active waveform: </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">waveform_generator_status</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Notch filter: </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">notch_filter_active</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Low-pass filter: </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">low_pass_filter_active</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Key d-Drive Status Flags:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">actor_plugged</span></code>: Actuator physically connected and detected</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sensor_type</span></code>: Position sensor type (<code class="xref py py-class docutils literal notranslate"><span class="pre">SensorType</span></code> enum)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">piezo_voltage_enabled</span></code>: High voltage output enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">closed_loop</span></code>: Closed-loop feedback control active</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">waveform_generator_status</span></code>: Active waveform type (<code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveWaveformGeneratorStatus</span></code> enum)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">notch_filter_active</span></code>: Notch filter enabled status</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">low_pass_filter_active</span></code>: Low-pass filter enabled status</p></li>
</ul>
</section>
<section id="d-drive-waveform-generator">
<h3>d-Drive Waveform Generator<a class="headerlink" href="#d-drive-waveform-generator" title="Link to this heading"></a></h3>
<p>The <a class="reference internal" href="api.html#psj_lib.devices.d_drive_family.capabilities.d_drive_waveform_generator.DDriveWaveformGenerator" title="psj_lib.devices.d_drive_family.capabilities.d_drive_waveform_generator.DDriveWaveformGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveWaveformGenerator</span></code></a> provides 5 waveform types and automated scanning:</p>
<p><strong>Waveform Types</strong> (<a class="reference internal" href="api.html#psj_lib.devices.d_drive_family.capabilities.d_drive_waveform_generator.DDriveWaveformType" title="psj_lib.devices.d_drive_family.capabilities.d_drive_waveform_generator.DDriveWaveformType"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveWaveformType</span></code></a>):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SINE</span></code>: Sinusoidal waveform</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TRIANGLE</span></code>: Triangular waveform with adjustable duty cycle</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RECTANGLE</span></code>: Square/rectangular waveform with duty cycle</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NOISE</span></code>: Random noise for dithering</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SWEEP</span></code>: Linear sweep/ramp (time in seconds for full cycle)</p></li>
</ul>
<p><strong>Basic Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psj_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">DDriveDevice</span><span class="p">,</span> <span class="n">DDriveWaveformType</span><span class="p">,</span> <span class="n">TransportType</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">DDriveDevice</span><span class="p">(</span><span class="n">TransportType</span><span class="o">.</span><span class="n">SERIAL</span><span class="p">,</span> <span class="s2">&quot;COM3&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">device</span><span class="p">:</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">wfg</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">waveform_generator</span>

    <span class="c1"># Configure sine wave</span>
    <span class="k">await</span> <span class="n">wfg</span><span class="o">.</span><span class="n">sine</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
        <span class="n">amplitude</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span>   <span class="c1"># 20 µm peak-to-peak</span>
        <span class="n">offset</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>      <span class="c1"># Center at 50 µm</span>
        <span class="n">frequency</span><span class="o">=</span><span class="mf">10.0</span>    <span class="c1"># 10 Hz</span>
    <span class="p">)</span>

    <span class="c1"># Activate sine waveform</span>
    <span class="k">await</span> <span class="n">wfg</span><span class="o">.</span><span class="n">set_waveform_type</span><span class="p">(</span><span class="n">DDriveWaveformType</span><span class="o">.</span><span class="n">SINE</span><span class="p">)</span>

    <span class="c1"># Stop waveform</span>
    <span class="k">await</span> <span class="n">wfg</span><span class="o">.</span><span class="n">set_waveform_type</span><span class="p">(</span><span class="n">DDriveWaveformType</span><span class="o">.</span><span class="n">NONE</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Automated Scan Function:</strong></p>
<p>The d-Drive supports automated single or double scan cycles:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psj_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">DDriveScanType</span>

<span class="c1"># Start automated single triangle scan</span>
<span class="k">await</span> <span class="n">wfg</span><span class="o">.</span><span class="n">start_scan</span><span class="p">(</span><span class="n">DDriveScanType</span><span class="o">.</span><span class="n">TRIANGLE_ONCE</span><span class="p">)</span>

<span class="c1"># Check if scan is still running</span>
<span class="k">while</span> <span class="k">await</span> <span class="n">wfg</span><span class="o">.</span><span class="n">is_scan_running</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Scan completed&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Scan Types</strong> (<a class="reference internal" href="api.html#psj_lib.devices.d_drive_family.capabilities.d_drive_waveform_generator.DDriveScanType" title="psj_lib.devices.d_drive_family.capabilities.d_drive_waveform_generator.DDriveScanType"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveScanType</span></code></a>):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SINE_ONCE</span></code>: Single sine cycle</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TRIANGLE_ONCE</span></code>: Single triangle cycle (up and down)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SINE_TWICE</span></code>: Two sine cycles</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TRIANGLE_TWICE</span></code>: Two triangle cycles</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OFF</span></code>: No automated scan</p></li>
</ul>
<p>See <a class="reference internal" href="base_capabilities.html"><span class="doc">Base Capabilities</span></a> for base waveform generator documentation.</p>
</section>
<section id="d-drive-data-recorder">
<h3>d-Drive Data Recorder<a class="headerlink" href="#d-drive-data-recorder" title="Link to this heading"></a></h3>
<p>The <a class="reference internal" href="api.html#psj_lib.devices.base.capabilities.data_recorder.DataRecorder" title="psj_lib.devices.base.capabilities.data_recorder.DataRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataRecorder</span></code></a> records two channels simultaneously at up to 50 kHz:</p>
<p><strong>Channel Mapping:</strong></p>
<ul class="simple">
<li><p><strong>Channel 1</strong>: Position sensor signal</p></li>
<li><p><strong>Channel 2</strong>: Actuator voltage</p></li>
</ul>
<p><strong>Key Specifications:</strong></p>
<ul class="simple">
<li><p>Maximum 500,000 samples per channel</p></li>
<li><p>50 kHz sample rate (20 µs period)</p></li>
<li><p>Stride (decimation) support for longer duration at lower rate</p></li>
<li><p>Both channels always record same length</p></li>
</ul>
<p><strong>Basic Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psj_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">DDriveDevice</span><span class="p">,</span> <span class="n">DDriveDataRecorderChannel</span><span class="p">,</span> <span class="n">TransportType</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">DDriveDevice</span><span class="p">(</span><span class="n">TransportType</span><span class="o">.</span><span class="n">SERIAL</span><span class="p">,</span> <span class="s2">&quot;COM3&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">device</span><span class="p">:</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">recorder</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">data_recorder</span>

    <span class="c1"># Configure for 1 second at 50 kHz</span>
    <span class="k">await</span> <span class="n">recorder</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
        <span class="n">memory_length</span><span class="o">=</span><span class="mi">50000</span><span class="p">,</span>  <span class="c1"># 50k samples at 50 kHz = 1 sec</span>
        <span class="n">stride</span><span class="o">=</span><span class="mi">1</span>              <span class="c1"># No decimation</span>
    <span class="p">)</span>

    <span class="c1"># Start recording</span>
    <span class="k">await</span> <span class="n">recorder</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="c1"># ... perform motion or waveform ...</span>

    <span class="c1"># Retrieve data</span>
    <span class="n">position_data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">recorder</span><span class="o">.</span><span class="n">get_all_data</span><span class="p">(</span>
        <span class="n">DDriveDataRecorderChannel</span><span class="o">.</span><span class="n">POSITION</span>
    <span class="p">)</span>
    <span class="n">voltage_data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">recorder</span><span class="o">.</span><span class="n">get_all_data</span><span class="p">(</span>
        <span class="n">DDriveDataRecorderChannel</span><span class="o">.</span><span class="n">VOLTAGE</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="base_capabilities.html"><span class="doc">Base Capabilities</span></a> for base data recorder documentation.</p>
<p><strong>d-Drive Data Format:</strong></p>
<p>The d-Drive recorder returns data that is automatically parsed by <a class="reference internal" href="api.html#psj_lib.devices.d_drive_family.capabilities.d_drive_data_recorder.DDriveDataRecorder" title="psj_lib.devices.d_drive_family.capabilities.d_drive_data_recorder.DDriveDataRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveDataRecorder</span></code></a>:</p>
<ul class="simple">
<li><p><strong>Position Channel</strong>: Returns percentage of full closed-loop motion range (includes ±30% overshoot capability)</p></li>
<li><p><strong>Voltage Channel</strong>: Returns output voltage in Volts</p></li>
</ul>
<p><strong>Configuration Notes:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_memory_length()</span></code> returns 500000 (maximum hardware capacity)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_stride()</span></code> returns 0 (d-Drive doesn’t support reading this back)</p></li>
</ul>
</section>
<section id="d-drive-closed-loop-controller">
<h3>d-Drive Closed-Loop Controller<a class="headerlink" href="#d-drive-closed-loop-controller" title="Link to this heading"></a></h3>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveClosedLoopController</span></code> extends the base controller with d-Drive specific status reading:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psj_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">DDriveDevice</span><span class="p">,</span> <span class="n">TransportType</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">DDriveDevice</span><span class="p">(</span><span class="n">TransportType</span><span class="o">.</span><span class="n">SERIAL</span><span class="p">,</span> <span class="s2">&quot;COM3&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">device</span><span class="p">:</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">closed_loop_controller</span>

    <span class="c1"># Enable closed-loop control</span>
    <span class="k">await</span> <span class="n">controller</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Check status via status register (d-Drive specific)</span>
    <span class="n">is_enabled</span> <span class="o">=</span> <span class="k">await</span> <span class="n">controller</span><span class="o">.</span><span class="n">get_enabled</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Closed-loop active: </span><span class="si">{</span><span class="n">is_enabled</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Get control loop frequency</span>
    <span class="n">period</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">sample_period</span>  <span class="c1"># 20 µs for d-Drive</span>
    <span class="n">frequency</span> <span class="o">=</span> <span class="mi">1000000</span> <span class="o">/</span> <span class="n">period</span>  <span class="c1"># 50 kHz</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Control loop: </span><span class="si">{</span><span class="n">frequency</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> Hz&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Key Features:</strong></p>
<ul class="simple">
<li><p>Reads closed-loop state from hardware status register (bit 7)</p></li>
<li><p>50 kHz control loop (20 µs sample period)</p></li>
<li><p>Integrated with PID controller for precise position control</p></li>
</ul>
</section>
<section id="d-drive-setpoint">
<h3>d-Drive Setpoint<a class="headerlink" href="#d-drive-setpoint" title="Link to this heading"></a></h3>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">DDriveSetpoint</span></code> provides setpoint control with client-side caching:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psj_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">DDriveDevice</span><span class="p">,</span> <span class="n">TransportType</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">DDriveDevice</span><span class="p">(</span><span class="n">TransportType</span><span class="o">.</span><span class="n">SERIAL</span><span class="p">,</span> <span class="s2">&quot;COM3&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">device</span><span class="p">:</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Set target position</span>
    <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">setpoint</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mf">50.0</span><span class="p">)</span>  <span class="c1"># 50 µm</span>

    <span class="c1"># Read back cached value (not from hardware)</span>
    <span class="n">target</span> <span class="o">=</span> <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">setpoint</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Target: </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2"> µm&quot;</span><span class="p">)</span>

    <span class="c1"># Compare with actual position</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">target</span> <span class="o">-</span> <span class="n">actual</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Position error: </span><span class="si">{</span><span class="n">error</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> µm&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Important Notes:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get()</span></code> returns the <strong>cached</strong> value, not a hardware read</p></li>
<li><p>d-Drive hardware does not support reading back setpoint</p></li>
<li><p>Cache is updated only when <code class="docutils literal notranslate"><span class="pre">set()</span></code> is called</p></li>
<li><p>If setpoint is changed by another application, cache will be stale</p></li>
<li><p>Initial cache value is 0.0 before first <code class="docutils literal notranslate"><span class="pre">set()</span></code> call</p></li>
</ul>
</section>
</section>
<section id="multi-channel-coordination">
<h2>Multi-Channel Coordination<a class="headerlink" href="#multi-channel-coordination" title="Link to this heading"></a></h2>
<p>d-Drive devices support 1-6 channels. Use parallel operations for efficient multi-channel control:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">psj_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">DDriveDevice</span><span class="p">,</span> <span class="n">TransportType</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">DDriveDevice</span><span class="p">(</span><span class="n">TransportType</span><span class="o">.</span><span class="n">SERIAL</span><span class="p">,</span> <span class="s2">&quot;COM3&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">device</span><span class="p">:</span>
    <span class="c1"># Enable closed-loop on all channels in parallel</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="p">[</span>
        <span class="n">ch</span><span class="o">.</span><span class="n">closed_loop_controller</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">device</span><span class="o">.</span><span class="n">channels</span>
    <span class="p">])</span>

    <span class="c1"># Move all channels simultaneously</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">70.0</span><span class="p">]</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="p">[</span>
        <span class="n">ch</span><span class="o">.</span><span class="n">setpoint</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ch</span><span class="p">,</span> <span class="n">pos</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">channels</span><span class="p">,</span> <span class="n">positions</span><span class="p">)</span>
    <span class="p">])</span>
</pre></div>
</div>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h2>
<p>Explore detailed capability documentation:</p>
<ul class="simple">
<li><p><strong>Getting Started</strong>: <a class="reference internal" href="getting_started.html"><span class="doc">Getting Started</span></a> - Basic device control and position feedback</p></li>
<li><p><strong>Base Capabilities</strong>: <a class="reference internal" href="base_capabilities.html"><span class="doc">Base Capabilities</span></a> - Control system, filtering, data acquisition, and signal generation</p></li>
<li><p><strong>Examples</strong>: <a class="reference internal" href="examples.html"><span class="doc">Examples</span></a> - Real-world use cases and complete applications</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="base_capabilities.html" class="btn btn-neutral float-right" title="Base Capabilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, piezosystem Jena.
      <span class="lastupdated">Last updated on Jan 20, 2026 13:14.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>